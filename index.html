<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Runner Gestor Elite</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body { margin: 0; background: #020617; font-family: 'Segoe UI', sans-serif; overflow: hidden; display: flex; align-items: center; justify-content: center; height: 100vh; }
    #hud { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, #fbbf24, #d97706); color: #fff; padding: 12px 30px; border-radius: 50px; font-size: 24px; font-weight: bold; z-index: 20; box-shadow: 0 4px 20px #fbbf2466; border: 2px solid #fff; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); }
    #wrapper { position: relative; width: 100%; max-width: 600px; height: 350px; border-radius: 24px; overflow: hidden; box-shadow: 0 40px 100px rgba(0,0,0,0.8); border: 3px solid #334155; background: #000; }
    canvas { width: 100%; height: 100%; display: block; image-rendering: pixelated; }
    .popup { position: fixed; inset: 0; background: rgba(15, 23, 42, 0.95); display: flex; align-items: center; justify-content: center; z-index: 30; backdrop-filter: blur(8px); }
    .popup-content { background: #fff; padding: 35px; border-radius: 24px; text-align: center; max-width: 380px; border: 4px solid #fbbf24; box-shadow: 0 0 30px rgba(251, 191, 36, 0.3); }
    .popup-content h2 { color: #1e293b; font-size: 30px; margin: 0 0 15px; font-weight: 900; }
    
    /* Estilo do Input de Nome */
    #player-name-input { width: 80%; padding: 12px; margin-top: 15px; border: 2px solid #cbd5e1; border-radius: 10px; font-size: 18px; text-align: center; outline: none; }
    #player-name-input:focus { border-color: #2563eb; }

    .popup-content button { cursor: pointer; margin-top: 25px; padding: 18px 45px; font-size: 20px; font-weight: 900; border: none; border-radius: 15px; background: #2563eb; color: #fff; box-shadow: 0 8px 0 #1e40af; transition: all 0.1s; }
    .popup-content button:active { transform: translateY(4px); box-shadow: 0 4px 0 #1e40af; }
    .hidden { display: none; }
    #mute-btn { position: fixed; bottom: 20px; left: 20px; z-index: 50; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); border-radius: 50%; width: 45px; height: 45px; color: #fff; cursor: pointer; font-size: 20px; display: flex; align-items: center; justify-content: center; }
</style>
</head>
<body>

<div id="hud">R$ 0</div>
<button id="mute-btn" onclick="toggleMute()">üîä</button>

<div id="start" class="popup">
    <div class="popup-content">
        <div style="font-size: 60px;">üöÄ</div>
        <h2>META: R$ 1.000</h2>
        <p>Digite seu nome de Gestor e acelere!</p>
        <input type="text" id="player-name-input" placeholder="Seu Nome Aqui" maxlength="12">
        <button onclick="startGame()">JOGAR AGORA</button>
    </div>
</div>

<div id="end" class="popup hidden">
    <div class="popup-content">
        <div style="font-size: 70px;">üèÜ</div>
        <h2>MISS√ÉO CUMPRIDA!</h2>
        <p>Sua performance foi excelente. Clique abaixo para garantir sua vaga com desconto.</p>
        <button onclick="location.href='SUA_VSL_AQUI.html'">RESGATAR B√îNUS</button>
    </div>
</div>

<div id="wrapper">
    <canvas id="game"></canvas>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = 800; canvas.height = 400;

let run = false, score = 0, frame = 0, muted = false, playerName = "";
const groundY = 320;
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

function playSound(freq, type, duration, vol=0.1) {
    if(muted) return;
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    osc.type = type; osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
    gain.gain.setValueAtTime(vol, audioCtx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + duration);
    osc.connect(gain); gain.connect(audioCtx.destination);
    osc.start(); osc.stop(audioCtx.currentTime + duration);
}

function toggleMute() {
    muted = !muted;
    document.getElementById("mute-btn").innerText = muted ? "üîá" : "üîä";
}

const player = {
    x: 100, y: groundY - 100, w: 60, h: 90, vy: 0, gravity: 0.8,
    update() {
        this.vy += this.gravity;
        this.y += this.vy;
        if (this.y > groundY - this.h) { this.y = groundY - this.h; this.vy = 0; }
    },
    draw() {
        ctx.save();
        const anim = Math.sin(frame * 0.2) * 4;
        
        // CAPA MELHORADA (Estilo Her√≥i saindo dos ombros)
        ctx.fillStyle = "#e11d48";
        ctx.beginPath();
        ctx.moveTo(this.x + 15, this.y + 25); // Ombro 1
        ctx.lineTo(this.x + 45, this.y + 25); // Ombro 2
        ctx.bezierCurveTo(this.x - 30 - anim, this.y + 20 - anim, this.x - 50, this.y + 90 + anim, this.x + 10, this.y + 70);
        ctx.fill();

        // CORPO
        ctx.fillStyle = "#1d4ed8";
        ctx.fillRect(this.x + 15, this.y + 25, 30, 45);
        ctx.fillStyle = "#fff"; ctx.fillRect(this.x + 27, this.y + 25, 6, 10);
        ctx.fillStyle = "#dc2626"; ctx.fillRect(this.x + 29, this.y + 25, 2, 8);

        // CABE√áA
        ctx.fillStyle = "#ffdbac";
        ctx.beginPath(); ctx.arc(this.x + 30, this.y + 10, 18, 0, Math.PI * 2); ctx.fill();
        ctx.fillStyle = "#451a03";
        ctx.beginPath(); ctx.arc(this.x + 30, this.y + 5, 20, Math.PI, 0);
        ctx.lineTo(this.x + 50, this.y + 5); ctx.fill();

        // OLHOS E ROSTO
        ctx.fillStyle = "#fff"; ctx.fillRect(this.x + 22, this.y + 8, 6, 6); ctx.fillRect(this.x + 34, this.y + 8, 6, 6);
        ctx.fillStyle = "#000"; ctx.fillRect(this.x + 24, this.y + 10, 3, 3); ctx.fillRect(this.x + 36, this.y + 10, 3, 3);
        ctx.strokeStyle = "#27272a"; ctx.lineWidth = 2;
        ctx.beginPath(); ctx.moveTo(this.x+20, this.y+5); ctx.lineTo(this.x+28, this.y+7); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(this.x+42, this.y+5); ctx.lineTo(this.x+34, this.y+7); ctx.stroke();
        ctx.strokeStyle = "#991b1b"; ctx.beginPath(); ctx.arc(this.x+31, this.y+18, 5, 0.2, Math.PI-0.2); ctx.stroke();

        // PERNAS
        ctx.strokeStyle = "#1e3a8a"; ctx.lineWidth = 8;
        let legSize = Math.sin(frame * 0.3) * 20;
        ctx.beginPath(); ctx.moveTo(this.x+20, this.y+70); ctx.lineTo(this.x+20+legSize, this.y+95); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(this.x+40, this.y+70); ctx.lineTo(this.x+40-legSize, this.y+95); ctx.stroke();
        
        // NOME DO JOGADOR EM CIMA
        if(playerName) {
            ctx.fillStyle = "#fff";
            ctx.strokeStyle = "#000";
            ctx.lineWidth = 3;
            ctx.font = "bold 16px 'Segoe UI'";
            ctx.textAlign = "center";
            ctx.strokeText(playerName.toUpperCase(), this.x + 30, this.y - 15);
            ctx.fillText(playerName.toUpperCase(), this.x + 30, this.y - 15);
        }

        ctx.restore();
    }
};

let buildings = [];
let houses = []; // Elementos da "favela"
for(let i=0; i<10; i++) {
    buildings.push({x: i*180, w: 70 + Math.random()*40, h: 180 + Math.random()*120, color: '#1e293b'});
    // Adiciona casinhas pr√≥ximas
    houses.push({x: i*180 + 80, w: 40, h: 40, color: '#92400e'}); 
    houses.push({x: i*180 + 110, w: 35, h: 60, color: '#7c2d12'});
}

function drawScene() {
    // C√©u mais claro (Entardecer)
    let sky = ctx.createLinearGradient(0,0,0,400); sky.addColorStop(0,"#1e293b"); sky.addColorStop(1,"#334155");
    ctx.fillStyle = sky; ctx.fillRect(0,0,800,400);

    // Favela e Pr√©dios
    buildings.forEach((b, i) => {
        b.x -= 1.5; if(b.x < -200) b.x = 1100;
        ctx.fillStyle = b.color;
        ctx.fillRect(b.x, 400 - b.h, b.w, b.h);
        
        // Desenha casinhas (favela)
        let h1 = houses[i*2 % houses.length];
        h1.x -= 1.5; if(h1.x < -200) h1.x = 1100;
        ctx.fillStyle = "#78350f"; ctx.fillRect(h1.x, groundY - h1.h, h1.w, h1.h);
        ctx.fillStyle = "#fbbf24"; ctx.fillRect(h1.x + 5, groundY - h1.h + 5, 10, 10); // Janelinha
    });

    ctx.fillStyle = "#166534"; ctx.fillRect(0, groundY, 800, 80);
    ctx.fillStyle = "#334155"; ctx.fillRect(0, groundY + 15, 800, 50);
    for(let i=0; i<30; i++) {
        ctx.fillStyle = "#22c55e"; ctx.fillRect((i*40 - (frame*6)%40), groundY - 5, 20, 10);
    }
    ctx.strokeStyle = "#fbbf24"; ctx.setLineDash([40, 30]); ctx.lineDashOffset = frame*12; ctx.lineWidth = 4;
    ctx.beginPath(); ctx.moveTo(0, groundY+40); ctx.lineTo(800, groundY+40); ctx.stroke(); ctx.setLineDash([]);
}

let obstacles = []; let coins = [];

function loop() {
    if (!run) return;
    frame++;
    ctx.clearRect(0,0,800,400);
    drawScene();
    if(frame % 25 === 0) playSound(110 + ((frame/25)%4 * 10), 'sawtooth', 0.4, 0.08);
    player.update();
    player.draw();

    if (frame % 90 === 0) {
        const types = ['car', 'bus', 'moto'];
        obstacles.push({ x: 850, type: types[Math.floor(Math.random()*3)], w: 80 });
    }
    if (frame % 45 === 0) coins.push({ x: 850, y: groundY - 80 - Math.random()*100, r: 16, angle: 0 });

    obstacles.forEach((o, i) => {
        o.x -= 10;
        if(o.type === 'car') {
            ctx.fillStyle = "#dc2626"; ctx.fillRect(o.x, groundY-25, 80, 30);
            ctx.fillStyle = "#000"; ctx.beginPath(); ctx.arc(o.x+15, groundY+5, 10, 0, 7); ctx.arc(o.x+65, groundY+5, 10, 0, 7); ctx.fill();
        } else if(o.type === 'bus') {
            ctx.fillStyle = "#16a34a"; ctx.fillRect(o.x, groundY-50, 120, 55);
            ctx.fillStyle = "#93c5fd"; ctx.fillRect(o.x+10, groundY-40, 100, 15);
        } else {
            ctx.fillStyle = "#000"; ctx.fillRect(o.x, groundY-15, 50, 20);
        }
        if (o.x < player.x+40 && o.x+80 > player.x && player.y > groundY-80) {
            score = Math.max(0, score - 5);
            playSound(150, 'square', 0.2, 0.05);
            document.getElementById("hud").innerText = "R$ " + score;
        }
    });

    coins.forEach((c, i) => {
        c.x -= 10; c.angle += 0.2;
        ctx.save(); ctx.translate(c.x, c.y); ctx.scale(Math.cos(c.angle), 1);
        ctx.fillStyle = "#fbbf24"; ctx.beginPath(); ctx.arc(0,0,c.r,0,Math.PI*2); ctx.fill();
        ctx.strokeStyle = "#92400e"; ctx.lineWidth = 3; ctx.stroke();
        ctx.fillStyle = "#b45309"; ctx.font = "bold 20px Arial"; ctx.fillText("$", -7, 8); ctx.restore();
        if (Math.hypot(c.x - (player.x+30), c.y - (player.y+40)) < 50) {
            score += 100; playSound(880, 'sine', 0.1, 0.15);
            coins.splice(i, 1);
            document.getElementById("hud").innerText = "R$ " + score;
            if(score >= 1000) { run = false; document.getElementById("end").classList.remove("hidden"); }
        }
    });

    obstacles = obstacles.filter(o => o.x > -200);
    requestAnimationFrame(loop);
}

function startGame() {
    const input = document.getElementById("player-name-input");
    playerName = input.value || "GESTOR";
    if (audioCtx.state === 'suspended') audioCtx.resume();
    document.getElementById("start").classList.add("hidden");
    run = true; loop();
}

window.addEventListener("mousedown", () => { if(player.y >= groundY-player.h) player.vy = -18; });
window.addEventListener("touchstart", (e) => { e.preventDefault(); if(player.y >= groundY-player.h) player.vy = -18; });
window.addEventListener("keydown", (e) => { if(e.code === "Space" && player.y >= groundY-player.h) player.vy = -18; });
</script>
</body>
</html>
